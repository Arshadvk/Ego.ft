<%- include('../layouts/header.ejs') %>

    <!-- PAGE LOADING
    ================================================== -->
    <div id="preloader"></div>

    <!-- MAIN WRAPPER
    ================================================== -->
    <div class="main-wrapper mp-pusher" id="mp-pusher">

        <!-- HEADER
        ================================================== -->
        <%- include('../layouts/nav.ejs') %>


            <!-- PAGE TITLE
        ================================================== -->
            <section class="page-title-section bg-img cover-background" data-background="img/bg/page-title.jpg">
                <div class="container">

                    <div class="title-info">
                        <h1>Success!</h1>
                    </div>
                    <div class="breadcrumbs-info">
                        <ul class="ps-0">
                            <li><a href="/">Home</a></li>
                            <li><a href="#">Success!</a></li>
                        </ul>
                    </div>

                </div>
            </section>

            <!-- CHECKOUT COMPLETE
        ================================================== -->
            <section class="md">
                <div class="container">
                    <div class="row justify-content-center">
                        <div class="col-lg-8">

                            <div class="common-block text-center">

                                <div class="inner-title">
                                    <h3 class="mb-0">Thank you for your order!</h3>
                                </div>

                                <p class="lead mb-4">
                                    Order id : <%= order.orderId %> <br>
                                        Order totel : â‚¹ <%= order.totel %> <br>
                                            Payment Type : <%= order.paymentType %> <br>

                                </p>
                                <button type="button" class="butn-style2 wide m-1" data-bs-toggle="modal"
                                    data-bs-target="#exampleModal">
                                    Download invoice
                                </button>
                                <a href="/home" class="butn-style2 wide m-1">Back to home</a>

                            </div>

                        </div>
                    </div>
                </div>
            </section>

            <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel"
                aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h1 class="modal-title fs-5" id="exampleModalLabel">Modal title</h1>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            <!DOCTYPE html>
                            <html>

                            <head>
                                <meta charset="utf-8" />
                                <title>Tax Invoice</title>
                                <link rel="shortcut icon" type="image/png" href="./favicon.png" />
                                <style>
                                    * {
                                        box-sizing: border-box;
                                    }

                                    .table-bordered td,
                                    .table-bordered th {
                                        border: 1px solid #ddd;
                                        padding: 10px;
                                        word-break: break-all;
                                    }

                                    body {
                                        font-family: Arial, Helvetica, sans-serif;
                                        margin: 0;
                                        padding: 0;
                                        font-size: 16px;
                                    }

                                    .h4-14 h4 {
                                        font-size: 12px;
                                        margin-top: 0;
                                        margin-bottom: 5px;
                                    }

                                    .img {
                                        margin-left: "auto";
                                        margin-top: "auto";
                                        height: 30px;
                                    }

                                    pre,
                                    p {
                                        /* width: 99%; */
                                        /* overflow: auto; */
                                        /* bpicklist: 1px solid #aaa; */
                                        padding: 0;
                                        margin: 0;
                                    }

                                    table {
                                        font-family: arial, sans-serif;
                                        width: 100%;
                                        border-collapse: collapse;
                                        padding: 1px;
                                    }

                                    .hm-p p {
                                        text-align: left;
                                        padding: 1px;
                                        padding: 5px 4px;
                                    }

                                    td,
                                    th {
                                        text-align: left;
                                        padding: 8px 6px;
                                    }

                                    .table-b td,
                                    .table-b th {
                                        border: 1px solid #ddd;
                                    }

                                    .hm-p td,
                                    .hm-p th {
                                        padding: 3px 0px;
                                    }

                                    .cropped {
                                        float: right;
                                        margin-bottom: 20px;
                                        height: 100px;
                                        /* height of container */
                                        overflow: hidden;
                                    }

                                    .cropped img {
                                        width: 400px;
                                        margin: 8px 0px 0px 80px;
                                    }

                                    .main-pd-wrapper {
                                        box-shadow: 0 0 10px #ddd;
                                        background-color: #fff;
                                        border-radius: 10px;
                                        padding: 15px;
                                    }

                                    .table-bordered td,
                                    .table-bordered th {
                                        border: 1px solid #ddd;
                                        padding: 10px;
                                        font-size: 14px;
                                    }

                                    .invoice-items {
                                        font-size: 14px;
                                        border-top: 1px dashed #ddd;
                                    }

                                    .invoice-items td {
                                        padding: 14px 0;

                                    }
                                </style>
                            </head>

                            <body>
                                <section class="main-pd-wrapper" id="invoice" style="width: 450px; margin: auto">
                                    <div style="
                                          text-align: center;
                                          margin: auto;
                                          line-height: 1.5;
                                          font-size: 14px;
                                          color: #4a4a4a;
                                        ">


                                        <p style="font-weight: bold; color: #000; margin-top: 15px; font-size: 18px;">
                                            Invoice/Bill Of Supply <span class="text-danger">Ego.ft</span> Retailers<br>
                                            Private Limited
                                        </p>
                                        <p style="margin: 15px auto;">
                                            A2, Test Street <br>
                                            Test Area Bangaluru 560001, Karnataka
                                        </p>
                                        <p>
                                            <b>GSTIN:</b> 0987653456789
                                        </p>
                                        <p>
                                            <b>CIN:</b> 0987653456789
                                        </p>
                                        <p>
                                            <b>FSSAI No. :</b> +91 73565 68978
                                        </p>
                                        <hr style="border: 1px dashed rgb(131, 131, 131); margin: 25px auto">
                                    </div>
                                    <table style="width: 100%; table-layout: fixed">
                                        <thead>
                                            <tr>
                                                <th style="width: 50px; padding-left: 0;">Sn.</th>
                                                <th style="width: 220px;">Item Name</th>
                                                <th>Price</th>
                                                <th>QTY</th>
                                                <th style="text-align: right; padding-right: 0;">Total Price</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <%order.product.forEach((product,index)=> { %>
                                                <tr class="invoice-items">
                                                    <td>
                                                        <%= index+1 %>
                                                    </td>
                                                    <td>
                                                        <%= product.productid.product_name%>
                                                    </td>
                                                    <td>â‚¹<%= product.singlePrice%>
                                                    </td>
                                                    <td>
                                                        <%= product.qty %> PC
                                                    </td>
                                                    <td style="text-align: right;">â‚¹<%= product.singleTotel%>
                                                    </td>
                                                </tr>
                                                <% }) %>


                                        </tbody>
                                    </table>
                                    <table style="width: 100%;
                                      margin-top: 15px;
                                      border: 1px dashed #00cd00;
                                      border-radius: 3px;">
                                        <thead>
                                            <tr>
                                                <th>Sub Total</th>

                                                <th style="text-align: right;">â‚¹<%= order.totel %>
                                                </th>

                                            </tr>
                                            <tr>
                                                <td>Discount </td>

                                                <!-- <td style="text-align: right;">-â‚¹ </td> -->

                                                <td style="text-align: right;">â‚¹ <%= order.discount %>
                                                </td>

                                            </tr>
                                            <tr>
                                                <td>Total Saving In Rs </td>

                                                <!-- <td style="text-align: right;">â‚¹</td> -->

                                                <td style="text-align: right;">â‚¹ 0</td>

                                            </tr>

                                        </thead>

                                    </table>

                                    <table class="my-3" style="width: 100%;
                                      background: #fcbd024f;
                                      border-radius: 4px;">
                                        <thead>
                                            <tr>
                                                <th>Total</th>
                                                <th style="text-align: center;">Item(<%= order.product.length %>)</th>
                                                <th>&nbsp;</th>
                                                <th style="text-align: right;">â‚¹ <%=
                                                        order.totel  %>
                                                </th>

                                            </tr>
                                        </thead>

                                    </table>

                                </section>
                            </body>

                            </html>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                            <button type="button" class="btn btn_3" onclick="invoice()">Save Invoice</button>
                        </div>
                    </div>
                </div>
            </div>
            <%- include('../layouts/foot.ejs') %>

            <script>
                function invoice(){
                  var divToPrint = document.getElementById("invoice");
                var newWindow = window.open("", "Print Window");
                newWindow.document.write(divToPrint.outerHTML);
                newWindow.print();
                newWindow.close();
                }
              </script>
                </div> 
              

    </div>

    <%- include('../layouts/footer.ejs') %>